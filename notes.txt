http://www.dev-maplarge.com/app.html
/Users/petergorgone/workspace/study/MapLarge

http://www.dev-maplarge.com/api/index.php?src=/treeroot/foo

%TODO:
[ ] problem: links in library have handlers in 'main'
[ ] folder green if writable, disable upload and move if not writable (?)
[ ] multiple browser testing
    ~ https://developer.microsoft.com/en-us/microsoft-edge/
[ ] send direct api links
http://www.dev-maplarge.com/api/index.php?src=/treeroot/foo/file1.txt
[ ] Need to store rootpath in server sesssion or equiv. otherwise re-load page (deep linkable) doesn't really work (needs to be reset each time).
[ ] use strict
[ ] SECURITY: disallow outside of sandbox!!!
[ ] set root
[ ] ok to show full path, but don't allow user to go above root
[ ] fill text files with dummy lorem ipsum contents
[ ] .txt file preview browser??
[ ] for simplicity just deal in absolute paths
[ ] download
[ ] test upload
[ ] implement search
[ ] dialog widget
[ ] Don't worry about error corner cases (??)
    ~ security in the API (eg only make certain sub-trees visible, blacklist, whitelist, etc)
[ ] move, delete, copy files & folders

[ ] => use node object for navigation (when clicking)
[ ] convert ids to classes for widget
[ ] when file is 'current', make its folder the parent, no children
    ~ dont' call index api
    ~ remove data-subpath in links and track current from Navigation object
[ ] make current a node (so we can display if it's a file or folder, etc)
[ ] => make Data & ops have tabs, prototype object for fileThingy with child objects for file and folder, that each know how to render their own info

USE interfaces & traits
code comments

// https://code.tutsplus.com/tutorials/build-your-first-javascript-library--net-26796
// https://stackoverflow.com/questions/16279519/how-to-create-javascript-library-of-self-written-functions

[/] search
[/] browse
[ ] set home directory
[ ] returns json
[ ] upload file
[ ] download file
[ ] delete file
[ ] copy file
    ~ deal with duplicates, for upload as well
[ ] move file
[ ] preview file contents (?)
[ ] file types


--
folders
files


---

%%% Deep Linkable
http://www.dev-maplarge.com/app.html
http://www.dev-maplarge.com/app.html
http://www.dev-maplarge.com/app.html?path=treeroot
http://www.dev-maplarge.com/app.html?path=treeroot/foo
http://www.dev-maplarge.com/app.html?path=treeroot/newfile.txt

%%% API

GET     /index?src=root/foo/bar
GET     /view?src=root/foo/bar/file.txt
GET     /search?root=root/foo/bar&q=myfile
POST    /copy?src=root/foo/file1.txt&dst=root/bar
POST    /upload?dst=root/foo
PUT     /move?src=root/foo/file1.txt&dst=root/bar
DELETE  /remove?src=root/foo/file1.txt

%%% UI

browse: 
    ~ go to root/home
    ~ go to child node
    ~ go to sibling node (next, prev)
    ~ go to parent node
    ~ view ( think mac finder ): simple parent, sibling, children links display with a "you are here" (current view)
        o "current view" : show file & folder counts
    ~ distiguish folders from files

search:
    ~ recursive from current directory
    ~ set depth of search
    ~ search for type file, folder, or both?
    ~ display results, both folders and files, indicate which is which. 
        o click "navigate icon" for folder takes you to folder
        o click "preview icon" for  file takes you to folder, previews file (?)


move file:
    ~ need from and to folders
    ~ click "select icon" for file selects the file
    ~ selection appears in "sidebar"
    ~ navigate to destination
    ~ select "move here" icon, only visible if a selection is present

download file:
    ~ in file "view" mode only, icon to download

upload file:
    ~ in current folder, 'upload' icon adds files (not folders) to that folder

move folder:

corner cases:
    ~ move/copy/delete root folder not allowed
    ~ one selection at at time only

TDD:
    ~ plan it but don't write tests
    ~ api tests

State on client, not server!

Agile/Sprints:
    [ ] TBD

Misc:
    [ ] security: sanitize request input
    [ ] implement api under api folder (www/api)

---
Questions

server side file permissions?
choosing home directory: only valid under a certain root folder (or a set of root folders, to make permissions easy)

depth limit (for recursion)

---

Resources

https://www.sitepoint.com/list-files-and-directories-with-php/

https://gist.github.com/hakre/3599532

use classes & namespaces on PHP side

design pattern?

hide comlexity

decoupling

%%% inheritance

    - fsItem implements movable, copyable, delteable
        - folder/directory
        - file


icons can be text in this skeleton UI

